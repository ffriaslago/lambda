#lang sicp

(define (mystery x)
  (define (loop x y)
    (if (null? x)
        y
        (let ((temp (cdr x)))
          (set-cdr! x y)
          (loop temp x))))
  (loop x '()))

(define v (list 'a 'b 'c 'd))

v ; (a b c d)
                                                                                                                                                                            
;       ___ ___              ___ ___              ___ ___              ___ ___
;      |   |   |            |   |   |            |   |   |            |   |  /|
; v--->| · | · |----------->| · | · |----------->| · | · |----------->| · | / |
;      |___|___|            |___|___|            |___|___|            |___|/__|
;        |                    |                    |                    |
;        |                    |                    |                    |
;        |                    |                    |                    |
;        |                    |                    |                    |
;       \|/                  \|/                  \|/                  \|/
;       [a]                  [b]                  [c]                  [d]

(define w (mystery v))

w ; (d c b a)

v ; (a)

;       ___ ___              ___ ___              ___ ___              ___ ___
;      |   |   |            |   |   |            |   |   |            |   |  /|
; w--->| · | · |----------->| · | · |----------->| · | · |----------->| · | / |
;      |___|___|            |___|___|            |___|___|            |___|/__|
;        |                    |                    |                    |
;        |                    |                    |                    |
;        |                    |                    |                    |
;        |                    |                    |                    |
;       \|/                  \|/                  \|/                  \|/
;       [d]                  [c]                  [b]                  [a]

;       ___ ___ 
;      |   |  /|
; v--->| · | / |
;      |___|/__|
;        |  
;        |  
;        |  
;        |  
;       \|/ 
;       [a] 